Forked from https://hg.beremiz.org/CanFestival-3 and encorporating incubed specific changes.
